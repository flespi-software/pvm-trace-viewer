(this["webpackJsonppvm-trace-viewer"]=this["webpackJsonppvm-trace-viewer"]||[]).push([[0],[,,,,,,,,,,function(e,t,c){},,,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n,r=c(1),a=c.n(r),s=c(5),i=c.n(s),d=(c(10),c(3)),u=c(2),l=c.n(u);!function(e){e.Line="l",e.NewData="n",e.Offset="o",e.Error="e"}(n||(n={}));var o=function(e){return e.d.length/2},j=function(e){e&&e.scrollIntoView({behavior:"auto",block:"center",inline:"center"})},p=(c(13),c(0)),f=function(e){var t,c=e.traceDump,n=e.stepIndex,r=c.trace[n],a=null===(t=c.sourceLines)||void 0===t?void 0:t.main;if(!a)return Object(p.jsx)("div",{children:"no source code available"});var s=a.map((function(e,t){var c;return c=""===e?Object(p.jsx)("br",{}):e,Object(p.jsx)("pre",{ref:t===r.c[1]-1?j:void 0,className:t===r.c[1]-1?"source-code-line source-code-line-selected":"source-code-line",children:c},t)}));return Object(p.jsx)("div",{className:"source-code-lines",children:s})},x=function(e){var t=e.value,c=new Date(1e3*t).toLocaleString("en-GB",{hour:"numeric",minute:"numeric",second:"numeric"}),n=Number(t).toFixed(6).split(".")[1];return Object(p.jsxs)("span",{children:[c,".",n]})},b=(c(15),function(e){var t,c,r=e.traceDump,a=e.stepIndex,s=e.index,i=e.packetStep,d=e.setStepIndex,u=e.step,l=r.variables,f=function(e){var t=l.find((function(t){return t[0]===e}));return t?t[1]:"?"},b=function(e,t){if(!r.sourceLines)return"?";var c=function(e){var t=r.files.find((function(t){return t[0]===e}));if(!t)return null;var c=t[1];return c===r.bytecode_name?"main":c}(e);return c?r.sourceLines[c][t-1].trim():"?"};switch(u.t){case n.Line:t=Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:(c=u.v,c.map((function(e,t){return"number"===typeof e?Object(p.jsxs)("span",{className:"trace-var",children:["UNSET $",f(e)]},t):Object(p.jsxs)("span",{className:"trace-var",children:["$",f(e[0])," = ",e[2]]},t)})))}),Object(p.jsx)("div",{className:"trace-step-source-line",children:b(u.c[0],u.c[1])})]});break;case n.NewData:var v=o(u);t=Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"trace-step-data",children:[Object(p.jsx)("div",{className:"trace-step-data-column",children:v>20?u.d.slice(0,40)+"...":u.d}),Object(p.jsxs)("div",{className:"trace-step-data-column",children:[v," bytes,\xa0",Object(p.jsx)(x,{value:u.tm})]})]}),Object(p.jsx)("div",{className:"trace-step-source-line",children:b(u.c[0],u.c[1])})]});break;case n.Offset:t=Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"trace-step-data",children:[Object(p.jsx)("div",{className:"trace-step-data-column",children:i&&Object(p.jsxs)("span",{children:["\xa0\xa0",i.d.slice(2*u.l,2*u.o)]})}),Object(p.jsxs)("div",{className:"trace-step-data-column",children:[u.o-u.l," bytes: ",u.l,"...",u.o]})]}),Object(p.jsx)("div",{className:"trace-step-source-line",children:b(u.c[0],u.c[1])})]});break;case n.Error:t=Object(p.jsxs)("div",{children:["Error:",Object(p.jsx)("pre",{className:"trace-step-error",children:u.m}),Object(p.jsx)("div",{className:"trace-step-source-line",children:b(u.c[0],u.c[1])})]})}return Object(p.jsx)("div",{ref:s===a?j:void 0,className:s===a?"trace-step trace-step-selected":"trace-step",onClick:function(){return function(e){d(e)}(s)},children:t},s)}),v=(c(16),function(e){var t,c=e.traceDump.trace,r=e.stepIndex,a=e.setStepIndex,s=e.showAllSteps,i=c[r];console.log("step",i);var d=[];return c.forEach((function(c,i){c.t===n.NewData&&(t=c),(s||c.t!==n.Line)&&d.push(Object(p.jsx)(b,{traceDump:e.traceDump,stepIndex:r,index:i,packetStep:t,setStepIndex:a,step:c},i))})),Object(p.jsx)("div",{className:"trace-dump-steps",children:d})}),m=(c(17),function(e){var t=e.packet,c=e.step,n=e.index,r=e.stepIndex,a=e.setStepIndex;return Object(p.jsx)("span",{ref:n===r?j:void 0,className:n===r?"trace-packet-part trace-packet-part-selected":"trace-packet-part",onClick:function(){return function(e){a(e)}(n)},children:t.d.slice(2*c.l,2*c.o)})}),O=(c(18),function(e,t){return Object(u.findLastIndex)(e,(function(e){return e.t===n.NewData}),t-1)}),h=function(e,t){return Object(u.findIndex)(e,(function(e){return e.t===n.NewData}),t+1)},N=function(e){var t=e.traceDump.trace,c=e.packetIndex,r=e.setPacketIndex,a=e.stepIndex,s=e.setStepIndex,i=t[c];if(!i){var d=h(t,-1);return-1===d?Object(p.jsx)("div",{children:"No data packets available in the trace file"}):(setTimeout((function(){return r(d)})),null)}for(var u=[],l=c+1,j=t[l];j&&j.t!==n.NewData;)j.t===n.Offset&&u.push(Object(p.jsx)(m,{packet:i,step:j,index:l,stepIndex:a,setStepIndex:s},l)),j=t[l+=1];return Object(p.jsxs)("div",{className:"trace-packet",children:[Object(p.jsxs)("div",{className:"trace-packet-info",children:[Object(p.jsx)("div",{className:"flex",children:Object(p.jsx)("button",{onClick:function(){var e=O(t,c);-1===e&&(e=O(t,t.length)),r(e)},children:"<"})}),Object(p.jsx)("div",{className:"flex",children:Object(p.jsx)("button",{onClick:function(){var e=h(t,c);-1===e&&(e=h(t,-1)),r(e)},children:">"})}),Object(p.jsxs)("div",{className:"flex trace-packet-pad",children:["Time:\xa0",Object(p.jsx)(x,{value:i.tm})]}),Object(p.jsxs)("div",{className:"flex trace-packet-pad",children:["Size: ",o(i)," B"]})]}),Object(p.jsx)("div",{className:"flex trace-packet-hex",children:u})]})},I=(c(19),function(e){var t=e.traceFile,c=e.traceDump,a=Object(r.useState)(-1),s=Object(d.a)(a,2),i=s[0],u=s[1],o=Object(r.useState)(0),j=Object(d.a)(o,2),x=j[0],b=j[1],m=Object(r.useState)(!1),O=Object(d.a)(m,2),h=O[0],I=O[1],k=function(e){e<0?e=c.trace.length-1:e>=c.trace.length&&(e=0),b(e);var t=l.a.findLastIndex(c.trace,(function(e){return e.t===n.NewData}),e);-1!==t&&u(t)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"trace-file-info",children:["Loaded trace dump file ",Object(p.jsx)("strong",{children:t.name})," of size ",Object(p.jsx)("strong",{children:Number(t.size/1024).toFixed(2)})," KiB"]}),Object(p.jsx)(N,{traceDump:c,packetIndex:i,setPacketIndex:function(e){u(e),b(e)},stepIndex:x,setStepIndex:k}),Object(p.jsxs)("div",{className:"trace-view-settings",children:[Object(p.jsx)("button",{onClick:function(){return k(function(e){if(h)return e-1;var t=l.a.findLastIndex(c.trace,(function(e){return e.t!==n.Line}),e-1);return-1===t&&(t=l.a.findLastIndex(c.trace,(function(e){return e.t!==n.Line}),c.trace.length-1)),t}(x))},children:"<"}),Object(p.jsx)("button",{onClick:function(){return k(function(e){if(h)return e+1;var t=l.a.findIndex(c.trace,(function(e){return e.t!==n.Line}),e+1);return-1===t&&(t=l.a.findIndex(c.trace,(function(e){return e.t!==n.Line}),0)),t}(x))},children:">"}),"\xa0",Object(p.jsxs)("label",{children:["show all steps: ",Object(p.jsx)("input",{type:"checkbox",onChange:function(e){I(e.target.checked)}})]})]}),Object(p.jsxs)("div",{className:"trace-dump-details",children:[Object(p.jsx)(v,{traceDump:c,stepIndex:x,setStepIndex:k,showAllSteps:h}),Object(p.jsx)(f,{traceDump:c,stepIndex:x})]})]})}),k=(c(20),function(e){return Object(p.jsxs)("header",{className:"trace-dump-header",children:["Load trace dump:",Object(p.jsx)("input",{type:"file",onChange:function(t){if(t.target.files){var c=new FileReader,n=t.target.files[0];c.readAsText(n,"UTF-8"),e.setTraceFile({name:n.name,size:n.size}),c.onload=function(t){var c;if(null===(c=t.target)||void 0===c?void 0:c.result){var n=t.target.result.toString(),r=JSON.parse(n);if(r.source)for(var a in r.sourceLines={},r.source){var s=r.source[a].split("\n");r.sourceLines[a]=s}e.setTraceDump(r)}}}}})]})});c(21);var g=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(),s=Object(d.a)(a,2),i=s[0],u=s[1];return console.log("traceFile, traceDump",c,i),Object(p.jsx)("div",{className:"App",children:i&&c?Object(p.jsx)(I,{traceFile:c,traceDump:i}):Object(p.jsx)(k,{setTraceFile:n,setTraceDump:u})})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,23)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root")),S()}],[[22,1,2]]]);
//# sourceMappingURL=main.b5a4e9b6.chunk.js.map